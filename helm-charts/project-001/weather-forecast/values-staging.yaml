# Default values for the weather-forecast Helm chart

namespace: project-001-wf  # Specify the namespace here
repoURL: https://github.com/huseyindeniz/cicd-lab.git
targetRevision: main
chartPath: helm-charts/weather-forecast
server: https://kubernetes.default.svc

# Image configuration
image:
  repository: huseyindeniz/my-sample-app-1-weatherforecast-api
  pullPolicy: Always
  tag: ""
  migrationTag: ""
  interval: "5m"
  updateInterval: "1m"

# Deployment configuration
replicaCount: 1

hpa:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 50  # The average CPU utilization target for auto-scaling
  stabilizationWindowSeconds: 60
  scaleDownType: "Pods"
  scaleDownValue: 1
  scaleDownPeriodSeconds: 60 
  scaleUpType: "Percent"
  scaleUpValue: 100
  scaleUpPeriodSeconds: 15 

vpa:
  enabled: false
  updateMode: "Auto"                         # VPA update mode (Options: Off, Initial, Auto, Recreate)
  minAllowedCPU: "100m"                       # Minimum CPU resource for auto-scaling
  minAllowedMemory: "128Mi"                   # Minimum memory resource for auto-scaling
  maxAllowedCPU: "500m"                       # Maximum CPU resource for auto-scaling
  maxAllowedMemory: "1Gi"                     # Maximum memory resource for auto-scaling
  controlledValues: "RequestsAndLimits"       # Specifies whether VPA controls RequestsOnly or RequestsAndLimits

# Service configuration
service:
  enabled: true
  type: LoadBalancer
  port: 5000
  targetPort: 8080

# Environment variables for the container
env:
  ASPNETCORE_ENVIRONMENT: "Development"
  MIGRATION_ACTION: "apply"
  TARGET_MIGRATION: ""

# Resource requests and limits (optional)
resources:
  app:
    requests:
      cpu: "100m"
      memory: "128Mi"
    limits:
      cpu: "200m"
      memory: "256Mi"
  migration:
    requests:
      cpu: "200m"
      memory: "1Gi"
    limits:
      cpu: "600m"
      memory: "4Gi"
